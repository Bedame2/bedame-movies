(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1603:function(t,e,i){"use strict";var n,o=i(1),a=(i(53),i(211),i(182)),r=i(149),s=o.default.extend({name:"LoginContentHeader",props:{hide_signup_link:{type:Boolean,default:!1,required:!1}},computed:{destination:function(){var t=this.$router.currentRoute.query.destination;return Object.values(r.a).find((function(e){return e===t}))||r.a.Other},login_title:function(){switch(this.destination){case r.a.LinkDevice:return"Log In to Link Your Device".localized();case r.a.ParentalControls:return"Log In to Set Up Parental Controls".localized();case r.a.VerifyEmail:return"Log In to Verify Email".localized();case r.a.Other:return"Log In".localized()}}},components:{OrangeLink:a.a}}),d=(i(1793),i(4)),l=Object(d.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-header"},[i("h1",{staticClass:"title"},[t._v(t._s(t.login_title))]),t._v(" "),t.hide_signup_link?t._e():i("div",{staticClass:"dont-have-an-account-container"},[i("orange-link",{staticClass:"dont-have-an-account",attrs:{title:"Don't have an account yet? Get Started".localized(),to:"/signup"}})],1)])}),[],!1,null,"bd41107a",null).exports,c=i(394),u=(i(24),i(210),i(25),i(118),i(1116)),p=i(1755),h=i(1769),_=i(392),m=i(90),g=i(21),f=i(1567),v=i(30),x=i(597),b=i(15),w=i(104);!function(t){t.EmptyEmail="Please enter your email address",t.EmptyPassword="Please enter your password",t.InvalidEmail="It looks like this email address is invalid. Please try again.",t.InvalidPassword="The password you've entered is incorrect. Please try again.",t.UnknownError="An error occurred"}(n||(n={}));var y=o.default.extend({name:"LoginContentForm",data:function(){return{email:"",password:"",email_error:void 0,password_error:void 0,authenticating:!1,previous_identity_for_current_domain:void 0}},props:{verify_for_deletion:{type:Boolean,required:!1,default:!1}},created:function(){this.previous_identity_for_current_domain=this.$kuistore.getters["user/current_membership"]},computed:{destination:function(){var t,e=this.$router.currentRoute.query.destination;return null!==(t=Object.values(r.a).find((function(t){return t===e})))&&void 0!==t?t:r.a.Other},login_text_info:function(){switch(this.destination){case r.a.LinkDevice:return"".concat("Please log in or create an account to".localized()," <b>").concat("link you device".localized(),"</b>.");case r.a.ParentalControls:return"".concat("Please log in or create an account to access".localized()," <b>").concat("Parental Controls".localized(),"</b>.");case r.a.VerifyEmail:return"".concat("Please log in to".localized()," <b>").concat("verify your account".localized(),"</b>.");case r.a.Other:return""}},email_is_empty:function(){return 0===this.email.trim().length},password_is_empty:function(){return 0===this.password.trim().length},has_error:function(){return null!=this.email_error||null!=this.password_error},is_authenticated:function(){return this.$kuistore.getters["user/has_user_account_logged_in"]},social_button_mode:function(){return p.a.Login}},methods:{handle_email_update:function(t){this.email=t},handle_password_update:function(t){this.password=t},validate_fields:function(){this.email_is_empty?this.email_error=n.EmptyEmail:this.email_error=void 0,this.password_is_empty?this.password_error=n.EmptyPassword:this.password_error=void 0},social_login_success:function(t,e,i){switch(t){case f.a.Google:this.login_google_user(e,i);break;case f.a.Apple:this.login_apple_user(e,i)}},login_google_user:function(t,e){var i={accessToken:t},n={credentialType:g.m.Google,googleUser:i};this.send_login_request(n)},login_apple_user:function(t,e){if(null==(null==e?void 0:e.idToken)||null==e.nonce)console.error("missing 'identityToken'/'nonce' to sign in with Apple");else{var i={identityToken:e.idToken,nonce:e.nonce},n={credentialType:g.m.Apple,appleUser:i};this.send_login_request(n)}},login_email_user:function(){if(this.validate_fields(),!this.has_error){this.authenticating=!0;var t={email:this.email.valueOf(),password:this.password.valueOf()},e={credentialType:g.m.Email,emailUser:t};this.send_login_request(e)}},send_login_request:function(t){var e=this;(this.verify_for_deletion?this.$kuistore.dispatch("user/verify_account",t).then((function(){return e.redirect_to_delete_confirmation()})):this.$kuistore.dispatch("user/attempt_login",t).then((function(){return e.handle_login_success()}))).catch((function(t){return e.handle_login_error(t)})).finally((function(){e.authenticating=!1}))},handle_login_success:function(){if(this.is_authenticated){if(!this.$kuistore.getters["user/is_consumer_user"])return this.redirect_customer_to_kweb();var t=v.a.is_on_default_subpath(this.$route),e=Object(x.b)(this.$kuistore.state.user.memberships,this.$kuistore.state.user.user);if(t){var i=this.$kuistore.getters["user/user_default_stem"];null!=i&&e==="/".concat(i,"/")?this.redirect_with_destination_query_param(i):b.a.navigate(this.$router,e,!1)}else{var n=this.$kuistore.getters["user/has_membership_on_current_domain"],o=this.$kuistore.getters["user/has_active_membership_on_current_domain"],a=v.a.get_vp_subpath(this.$route);null==this.previous_identity_for_current_domain||o?n?this.redirect_with_destination_query_param(a):b.a.navigate(this.$router,e,!1):this.redirect_to_connect_identity(a)}}},handle_login_error:function(t){var e;if(t.errorSubcode===g.l.NoSocialRecord||t.errorSubcode===g.l.NoKanopyRecord)if(null!=(null===(e=t.userMessaging)||void 0===e?void 0:e.message)){var i=t.userMessaging.message;if(t.errorSubcode===g.l.NoKanopyRecord&&!this.verify_for_deletion){var o="Try to sign up".localized(),a='<a href="/signup" style="color:#DE3F00;font-weight:600">'.concat(o,"</a>");i="".concat(i," ").concat(a)}w.a.notify(i).asFailure().asHtml().during(15e3).push()}else w.a.notify("An error occurred".localized()).asFailure().push();else if(409===t.httpCode||401===t.httpCode&&this.verify_for_deletion){var r="Your login credentials must match the account you are trying to delete. Please try again.".localized();w.a.notify(r).asFailure().during(15e3).push()}else 401===t.httpCode?this.password_error=n.InvalidPassword:400===t.httpCode?(this.email_error=n.InvalidEmail,this.password_error=n.InvalidPassword):(this.email_error=n.UnknownError,this.password_error=n.UnknownError)},redirect_customer_to_kweb:function(){var t,e="/user/".concat(this.$kuistore.getters["user/userId"]);1===(null===(t=this.$kuistore.state.user.user)||void 0===t?void 0:t.userId)?window.location.href=v.a.kweb_redirection_url(this.$kuistore.state.site.environment,"admin",e):window.location.href=v.a.kweb_redirection_url(this.$kuistore.state.site.environment,v.a.DEFAULT_VP,e)},on_login_button_clicked:function(){this.login_email_user()},on_submit:function(t){this.login_email_user()},destination_query_param_url:function(t){var e;switch(this.destination){case r.a.LinkDevice:return"/".concat(t,"/link");case r.a.ParentalControls:return"/".concat(t,"/user/").concat(null===(e=this.$kuistore.state.user.user)||void 0===e?void 0:e.userId,"/parental-controls");case r.a.VerifyEmail:return"/".concat(t,"/user/").concat(this.$router.currentRoute.query.userId,"/activate/").concat(this.$router.currentRoute.query.jwt);case r.a.Other:var i=this.$router.currentRoute.query.destination;return"string"==typeof i&&i.startsWith("/")?i:"/".concat(t)}},redirect_with_destination_query_param:function(t){var e=this.destination_query_param_url(t);b.a.navigate(this.$router,e,!1)},redirect_to_connect_identity:function(t){var e="/".concat(t,"/signup/auth/").concat(this.$kuistore.getters["site/vp_routing_type"]);if(null!=b.a.queryParam(this.$route,"destination")){var i=this.destination_query_param_url(t);e="".concat(e,"?destination=").concat(i)}b.a.navigate(this.$router,e,!1)},redirect_to_delete_confirmation:function(){var t,e="/user/".concat(null===(t=this.$kuistore.state.user.user)||void 0===t?void 0:t.userId,"/delete-account/confirm");b.a.navigate(this.$router,e,!1)}},components:{KanopyForm:u.a,SocialButtonRow:p.b,OrBarHorizontal:h.a,Textfield:_.b,CTAButton:m.a,OrangeLink:a.a}}),k=(i(1813),Object(d.a)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-form-container"},[i("p",{staticClass:"text-info",domProps:{innerHTML:t._s(t.login_text_info)}}),t._v(" "),i("kanopy-form",{staticClass:"login-form",on:{submit:t.on_submit}},[i("textfield",{staticClass:"textfield email",attrs:{placeholder:"Email Address".localized(),type:"email",error_msg:t.email_error},on:{update_value:t.handle_email_update}}),t._v(" "),i("textfield",{staticClass:"textfield password",attrs:{placeholder:"Password".localized(),error_msg:t.password_error,is_secured:!0},on:{update_value:t.handle_password_update}}),t._v(" "),i("c-t-a-button",{staticClass:"login-button",attrs:{title:"Log In".localized(),uppercase:!0,disabled:t.authenticating},on:{click:t.on_login_button_clicked}}),t._v(" "),i("orange-link",{staticClass:"forgot-password",attrs:{title:"Forgot Password?".localized(),to:"/user/password"}}),t._v(" "),i("or-bar-horizontal"),t._v(" "),i("social-button-row",{attrs:{mode:t.social_button_mode},on:{auth_success:t.social_login_success}}),t._v(" "),i("p",{staticClass:"fb-info"},[t._v("\n            "+t._s("If you logged in to Kanopy using Facebook in the past".localized())+",\n            "),i("orange-link",{staticClass:"orange-link",attrs:{title:"reset your Kanopy password".localized(),to:"/user/password"}}),t._v("\n            "+t._s("to continue.".localized())+"\n            "),i("orange-link",{staticClass:"orange-link",attrs:{title:"Learn more about resetting your password.".localized(),to:"https://help.kanopy.com/hc/en-us/articles/5270441198487-Resetting-your-password",in_new_tab:!0}})],1)],1)],1)}),[],!1,null,"38b708cd",null).exports),C=o.default.extend({name:"LoginContent",props:{verify_for_deletion:{type:Boolean,required:!1,default:!1}},components:{LoginContentHeader:l,SectionDivider:c.a,LoginContentForm:k}}),$=(i(1815),Object(d.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("login-content-header",{staticClass:"onboarding-header",attrs:{hide_signup_link:t.verify_for_deletion}}),t._v(" "),i("section-divider",{staticClass:"onboarding-section-divider"}),t._v(" "),i("login-content-form",{staticClass:"onboarding-content",attrs:{verify_for_deletion:t.verify_for_deletion}})],1)}),[],!1,null,"37e4915e",null));e.a=$.exports},1625:function(t,e,i){var n=i(1794);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("07f93cc9",n,!0,{sourceMap:!1})},1632:function(t,e,i){var n=i(1814);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("363c2be4",n,!0,{sourceMap:!1})},1633:function(t,e,i){var n=i(1816);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("21ec9dfc",n,!0,{sourceMap:!1})},1793:function(t,e,i){"use strict";i(1625)},1794:function(t,e,i){var n=i(11)(!1);n.push([t.i,".debug-focus *[data-v-bd41107a]:focus{border:4px hotpink solid !important}.onboarding-header[data-v-bd41107a]{padding-top:56px;max-width:548px;height:256px;width:100%}@media (min-width: 725px) and (max-width: 1024px){.onboarding-header[data-v-bd41107a]{height:236px;padding-top:48px}}@media (min-width: 0px) and (max-width: 724px){.onboarding-header[data-v-bd41107a]{height:164px;padding-top:20px}}.onboarding-content[data-v-bd41107a]{margin-top:32px;margin-bottom:32px;max-width:548px;width:100%}@media (min-width: 0px) and (max-width: 724px){.onboarding-content[data-v-bd41107a]{margin-top:20px;margin-bottom:20px}}.title[data-v-bd41107a]{font-size:36px;line-height:1.2;padding-bottom:8px;border-bottom:solid 1px rgba(166,166,166,0.2)}@media (min-width: 768px) and (max-width: 1024px){.title[data-v-bd41107a]{font-size:32px}}@media (min-width: 0px) and (max-width: 767px){.title[data-v-bd41107a]{font-size:20px}}.dont-have-an-account-container[data-v-bd41107a]{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding-top:8px;margin-bottom:30px}.dont-have-an-account-container .dont-have-an-account[data-v-bd41107a]{font-size:12px}\n",""]),t.exports=n},1813:function(t,e,i){"use strict";i(1632)},1814:function(t,e,i){var n=i(11)(!1);n.push([t.i,".debug-focus *[data-v-38b708cd]:focus{border:4px hotpink solid !important}.login-form-container[data-v-38b708cd]{display:-webkit-flex;display:-ms-flexbox;display:flex;flex-direction:column}.login-form-container .text-info[data-v-38b708cd]{font-size:14px;line-height:1.4;margin-bottom:1em}@media (min-width: 0px) and (max-width: 767px){.login-form-container .text-info[data-v-38b708cd]{margin-bottom:0}}.login-form-container .login-form[data-v-38b708cd]{padding-top:1rem;padding-bottom:1rem}.login-form-container .login-form .textfield[data-v-38b708cd]{height:54px;font-size:14px;margin-bottom:2em}.login-form-container .login-form .textfield.has_error[data-v-38b708cd]{height:72px}.login-form-container .login-form .login-button[data-v-38b708cd]{width:100%;height:48px;font-size:16px}.login-form-container .login-form .forgot-password[data-v-38b708cd]{margin-top:30px}.login-form-container .login-form .fb-info[data-v-38b708cd]{margin-top:30px;font-size:14px;color:#807F7F;line-height:24px}.login-form-container .login-form .fb-info .orange-link[data-v-38b708cd]{text-decoration:underline;display:inline}\n",""]),t.exports=n},1815:function(t,e,i){"use strict";i(1633)},1816:function(t,e,i){var n=i(11)(!1);n.push([t.i,".debug-focus *[data-v-37e4915e]:focus{border:4px hotpink solid !important}.onboarding-header[data-v-37e4915e]{padding-top:56px;max-width:548px;height:256px;width:100%}@media (min-width: 725px) and (max-width: 1024px){.onboarding-header[data-v-37e4915e]{height:236px;padding-top:48px}}@media (min-width: 0px) and (max-width: 724px){.onboarding-header[data-v-37e4915e]{height:164px;padding-top:20px}}.onboarding-content[data-v-37e4915e]{margin-top:32px;margin-bottom:32px;max-width:548px;width:100%}@media (min-width: 0px) and (max-width: 724px){.onboarding-content[data-v-37e4915e]{margin-top:20px;margin-bottom:20px}}.container[data-v-37e4915e]{display:-webkit-flex;display:-ms-flexbox;display:flex;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:6em}@media (min-width: 0px) and (max-width: 767px){.container[data-v-37e4915e]{padding-bottom:1em}}@media (min-width: 0px) and (max-width: 767px){.onboarding-header[data-v-37e4915e],.onboarding-content[data-v-37e4915e]{width:90%}}.onboarding-header[data-v-37e4915e]{height:unset;min-height:173px;padding-top:70px}@media (min-width: 0px) and (max-width: 767px){.onboarding-header[data-v-37e4915e]{min-height:96px;padding-top:35px}}.onboarding-content[data-v-37e4915e]{margin-top:2em}@media (min-width: 0px) and (max-width: 767px){.onboarding-content[data-v-37e4915e]{margin-top:1em}}\n",""]),t.exports=n}}]);